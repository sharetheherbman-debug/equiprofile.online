# ==============================================================================
# EQUIPROFILE PRODUCTION ENVIRONMENT CONFIGURATION
# ==============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control
# ==============================================================================

# ==========================================
# CORE CONFIGURATION (Always Required)
# ==========================================

# Application Settings
NODE_ENV=production
PORT=3000
HOST=127.0.0.1

# Base URL (required for OAuth redirects and links)
BASE_URL=https://equiprofile.online

# ==========================================
# Database Configuration
# ==========================================
# Format: mysql://username:password@host:port/database
DATABASE_URL=mysql://equiprofile:password@localhost:3306/equiprofile

# ==========================================
# Authentication & Security
# ==========================================

# JWT Secret (generate with: openssl rand -base64 32)
# CRITICAL: Must be at least 32 characters, randomly generated
JWT_SECRET=your_jwt_secret_here_generate_with_openssl

# Admin Unlock Password
# CRITICAL: MUST be changed from default 'ashmor12@' in production
# Application will refuse to start with default password in production
ADMIN_UNLOCK_PASSWORD=ashmor12@

# ==========================================
# FEATURE FLAGS (Enable/Disable Features)
# ==========================================

# Enable Stripe billing and subscriptions
# Set to 'true' to enable, 'false' or leave empty to disable
ENABLE_STRIPE=false

# Enable document uploads and storage
# Set to 'true' to enable, 'false' or leave empty to disable
ENABLE_UPLOADS=false

# Enable PWA service worker
# Set to 'true' to enable offline support and caching
# Default: false (disabled for simple deployment)
ENABLE_PWA=false

# ==========================================
# OAUTH CONFIGURATION (Optional)
# ==========================================

# OAuth Server URL - URL of the OAuth authorization server
# Leave empty to disable OAuth login (email/password auth still works)
OAUTH_SERVER_URL=

# OAuth Application ID - The client ID registered with the OAuth server
# Required if OAUTH_SERVER_URL is set
VITE_APP_ID=

# Owner OpenID - OpenID of the application owner (for admin access)
# If set, this user automatically gets admin role
OWNER_OPEN_ID=

# ==========================================
# STRIPE CONFIGURATION (Required if ENABLE_STRIPE=true)
# ==========================================
# Get from https://dashboard.stripe.com

# Stripe keys
# STRIPE_SECRET_KEY=sk_live_xxxxx
# STRIPE_PUBLISHABLE_KEY=pk_live_xxxxx
# STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# Stripe price IDs for subscription plans
# STRIPE_MONTHLY_PRICE_ID=price_xxxxx
# STRIPE_YEARLY_PRICE_ID=price_xxxxx

# ==========================================
# UPLOAD/STORAGE CONFIGURATION (Required if ENABLE_UPLOADS=true)
# ==========================================

# Built-in Forge Storage API (for document uploads)
# BUILT_IN_FORGE_API_URL=https://your-forge-api.com
# BUILT_IN_FORGE_API_KEY=your_forge_api_key

# AWS S3 Configuration (legacy - alternative to Forge API)
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_REGION=eu-west-2
# AWS_S3_BUCKET=equiprofile-uploads

# ==========================================
# PWA (Progressive Web App) CONFIGURATION
# ==========================================

# Enable PWA service worker
# Set to 'true' to enable offline support and caching
# Default: false (disabled for simple deployment)
VITE_PWA_ENABLED=false

# ==========================================
# OPTIONAL FEATURES
# ==========================================

# OpenAI Configuration (for AI features)
# Get from https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-xxxxx

# Email Configuration (SMTP - for notifications)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_FROM=noreply@equiprofile.online

# ==========================================
# SECURITY & REVERSE PROXY
# ==========================================

# Rate Limiting Configuration
# Default: 100 requests per 15 minutes per IP
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Cookie Security (Important when behind reverse proxy)
# Set to your domain for production
# COOKIE_DOMAIN=equiprofile.online
# COOKIE_SECURE=true

# ==========================================
# LOGGING
# ==========================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Log file path (ensure directory exists and is writable)
# LOG_FILE_PATH=/var/log/equiprofile/app.log

# ==========================================
# BUILD CONFIGURATION (for build endpoints)
# ==========================================

# Build ID (auto-generated during build)
# BUILD_ID=abc123

# Build timestamp (auto-generated during build)
# BUILD_TIME=2026-01-07T12:00:00.000Z
