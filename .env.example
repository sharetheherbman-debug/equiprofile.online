# ==============================================================================
# EQUIPROFILE PRODUCTION ENVIRONMENT CONFIGURATION
# ==============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control
# ==============================================================================

# Database Configuration
# ==========================================
# EquiProfile Environment Configuration
# ==========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ==========================================
# Application Settings
# ==========================================
NODE_ENV=development
PORT=3000

# ==========================================
# Database Configuration
# ==========================================
# Format: mysql://username:password@host:port/database
DATABASE_URL=mysql://equiprofile:password@localhost:3306/equiprofile

# ==========================================
# Authentication & Security
# ==========================================
# Generate with: openssl rand -base64 32
JWT_SECRET=your_jwt_secret_here

# OAuth Provider Configuration
# Get credentials from:
# - Google: https://console.cloud.google.com/apis/credentials
# - GitHub: https://github.com/settings/developers
# - Microsoft: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps

GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

MICROSOFT_CLIENT_ID=your_microsoft_client_id
MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret

# ==========================================
# Stripe Payment Processing
# ==========================================
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Subscription Plans (Stripe Price IDs)
STRIPE_MONTHLY_PRICE_ID=price_...
STRIPE_YEARLY_PRICE_ID=price_...

# ==========================================
# OpenAI Integration (Weather Analysis)
# ==========================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=500

# ==========================================
# AWS S3 Storage (File Uploads)
# ==========================================
# Get from: https://console.aws.amazon.com/iam/
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=equiprofile-uploads

# ==========================================
# Email Service (Optional)
# ==========================================
# For sending notifications and reminders
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_FROM_NAME=EquiProfile
SMTP_FROM_EMAIL=noreply@equiprofile.online

# ==========================================
# Admin Configuration
# ==========================================
# Admin user is auto-promoted based on openId
# Get your openId from the database after first login
ADMIN_OPENID=your_oauth_open_id

# Admin password for console toggle (MUST change in production!)
ADMIN_PASSWORD=equi2024!admin

# Frontend admin password (set via Vite)
VITE_ADMIN_PASSWORD=equi2024!admin

# ==========================================
# Monitoring & Logging (Optional)
# ==========================================
# Sentry for error tracking
SENTRY_DSN=https://...@sentry.io/...

# LogRocket for session replay
LOGROCKET_APP_ID=your_app_id

# ==========================================
# Feature Flags (Optional)
# ==========================================
ENABLE_AI_FEATURES=true
ENABLE_WEATHER_ANALYSIS=true
ENABLE_FILE_UPLOADS=true
ENABLE_NOTIFICATIONS=false
ENABLE_STRIPE_PAYMENTS=true

# ==========================================
# Development Settings
# ==========================================
# Show detailed errors in development
DEBUG=true
LOG_LEVEL=debug

# Skip email verification in development
SKIP_EMAIL_VERIFICATION=true

# Use mock payment processor in development
USE_MOCK_STRIPE=false

# ==========================================
# Production Settings (Override for Production)
# ==========================================
# NODE_ENV=production
# DEBUG=false
# LOG_LEVEL=info
# SKIP_EMAIL_VERIFICATION=false
# USE_MOCK_STRIPE=false
# CORE CONFIGURATION (Always Required)
# ==========================================

# Database Configuration
# REQUIRED: MySQL/MariaDB connection string
# Format: mysql://username:password@host:port/database
DATABASE_URL=mysql://equiprofile:password@localhost:3306/equiprofile

# JWT Secret (generate with: openssl rand -base64 32)
# CRITICAL: Must be a strong random secret (64+ characters recommended)
# REQUIRED: Secret key for JWT token generation and validation
# CRITICAL: Must be at least 32 characters, randomly generated
JWT_SECRET=your_jwt_secret_here_generate_with_openssl

# Admin Unlock Password (change this in production!)
# REQUIRED: Password for unlocking admin mode in the application
# Default: ashmor12@ - MUST be changed for production
# WARNING: Application will refuse to start if this is set to default in production
ADMIN_UNLOCK_PASSWORD=ashmor12@

# Application Configuration
# REQUIRED for production: Node environment setting
NODE_ENV=production

# OPTIONAL: Server port (default: 3000)
PORT=3000

# REQUIRED for production: Base URL of your application (used for OAuth redirects)
# Must include protocol (https://) and domain
# Example: https://equiprofile.online or http://localhost:3000
BASE_URL=https://equiprofile.online

# ==========================================
# OAUTH CONFIGURATION (Optional)
# ==========================================

# OAuth Server URL - URL of the OAuth authorization server
# OPTIONAL: Leave empty to disable OAuth login (email/password auth still works)
# Example: https://auth.yourserver.com
OAUTH_SERVER_URL=

# OAuth Application ID - The client ID registered with the OAuth server
# OPTIONAL: Required if OAUTH_SERVER_URL is set
# Example: your-app-id-here
VITE_APP_ID=

# Owner OpenID - OpenID of the application owner (for admin access)
# OPTIONAL: If set, this user automatically gets admin role
# Get this from your OAuth provider after first login
OWNER_OPEN_ID=

# ==========================================
# FEATURE FLAGS (Enable/Disable Features)
# ==========================================

# Enable Stripe billing and subscriptions
# OPTIONAL: Set to 'true' to enable, 'false' or leave empty to disable
# When disabled: App runs without payment features (free mode)
ENABLE_STRIPE=false

# Enable document uploads and storage
# OPTIONAL: Set to 'true' to enable, 'false' or leave empty to disable
# When disabled: App runs without upload features
ENABLE_UPLOADS=false

# ==========================================
# STRIPE CONFIGURATION (Required if ENABLE_STRIPE=true)
# ==========================================

# Get from https://dashboard.stripe.com
# STRIPE_SECRET_KEY - Secret key for Stripe API
# REQUIRED IF ENABLE_STRIPE=true: sk_test_xxxxx or sk_live_xxxxx
# STRIPE_SECRET_KEY=sk_live_xxxxx

# STRIPE_PUBLISHABLE_KEY - Public key for Stripe.js
# OPTIONAL: Used in frontend for Stripe Checkout
# STRIPE_PUBLISHABLE_KEY=pk_live_xxxxx

# STRIPE_WEBHOOK_SECRET - Webhook signing secret
# REQUIRED IF ENABLE_STRIPE=true: whsec_xxxxx
# Get this from Stripe Dashboard > Developers > Webhooks
# STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# STRIPE_MONTHLY_PRICE_ID - Price ID for monthly subscription
# OPTIONAL: If not set, monthly subscription option won't be available
# STRIPE_MONTHLY_PRICE_ID=price_xxxxx

# STRIPE_YEARLY_PRICE_ID - Price ID for yearly subscription
# OPTIONAL: If not set, yearly subscription option won't be available
# STRIPE_YEARLY_PRICE_ID=price_xxxxx

# ==========================================
# UPLOAD/STORAGE CONFIGURATION (Required if ENABLE_UPLOADS=true)
# ==========================================

# Built-in Forge Storage API (for document uploads)
# BUILT_IN_FORGE_API_URL - Forge API endpoint URL
# REQUIRED IF ENABLE_UPLOADS=true: https://your-forge-api.com
# BUILT_IN_FORGE_API_URL=https://your-forge-api.com

# BUILT_IN_FORGE_API_KEY - Forge API authentication key
# REQUIRED IF ENABLE_UPLOADS=true: your_forge_api_key
# BUILT_IN_FORGE_API_KEY=your_forge_api_key

# ==========================================
# OPTIONAL FEATURES
# ==========================================

# OpenAI Configuration (for AI features)
# OPTIONAL: Enable AI-powered insights and chat features
# Get from https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-xxxxx

# AWS S3 Configuration (legacy - kept for backward compatibility)
# OPTIONAL: Alternative to Forge API for file storage
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_REGION=eu-west-2
# AWS_S3_BUCKET=equiprofile-uploads

# Email Configuration (optional - for notifications)
# OPTIONAL: Enable email notifications for events
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_FROM=noreply@equiprofile.online

# ==========================================
# REVERSE PROXY & SECURITY (Important for production)
# ==========================================

# Rate Limiting Configuration
# OPTIONAL: Default is 100 requests per 15 minutes per IP
# RATE_LIMIT_WINDOW_MS - Time window in milliseconds (default: 900000 = 15 min)
RATE_LIMIT_WINDOW_MS=900000
# RATE_LIMIT_MAX_REQUESTS - Max requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# Cookie Security (Important when behind reverse proxy)
# COOKIE_DOMAIN - Domain for session cookies
# OPTIONAL: Set to your domain for production (e.g., equiprofile.online)
# Leave empty for localhost development
# COOKIE_DOMAIN=equiprofile.online

# Admin Unlock Password
# CRITICAL: MUST be changed from default 'ashmor12@' in production
# Application will refuse to start with default password in NODE_ENV=production
# Recommended: 16+ characters, mixed case, numbers, symbols
# Generate with: openssl rand -base64 24
ADMIN_UNLOCK_PASSWORD=ashmor12@

# Logging Configuration
# LOG_LEVEL options: error, warn, info, debug
LOG_LEVEL=info
# LOG_FILE_PATH: Where application logs are written
# Ensure directory exists and is writable: sudo mkdir -p /var/log/equiprofile
LOG_FILE_PATH=/var/log/equiprofile/app.log
# COOKIE_SECURE - Enable secure cookies (HTTPS only)
# OPTIONAL: Set to 'true' in production with HTTPS, 'false' for localhost
# Default: false
# COOKIE_SECURE=true

# CSRF Protection
# OPTIONAL: Secret for CSRF token generation
# CSRF_SECRET=generate_random_secret_here

# ==========================================
# LOGGING
# ==========================================

# Logging Configuration
# OPTIONAL: Control log verbosity and destination
# LOG_LEVEL - Log level (debug, info, warn, error)
# LOG_LEVEL=info

# LOG_FILE_PATH - Path to log file
# LOG_FILE_PATH=/var/log/equiprofile/app.log
