# ==============================================================================
# EQUIPROFILE PRODUCTION ENVIRONMENT - WEBDOCK VPS
# ==============================================================================
# Ready-to-deploy configuration for production use
# Copy this file to .env and fill in your actual values
# ==============================================================================

# ==========================================
# CORE CONFIGURATION (Required)
# ==========================================

NODE_ENV=production
PORT=3000
HOST=127.0.0.1

# Your production domain
# IMPORTANT: Change this to your actual domain
BASE_URL=https://equiprofile.online

# ==========================================
# DATABASE CONFIGURATION (Required)
# ==========================================
# Format: mysql://username:password@host:port/database
# Example: mysql://equiprofile:SecurePass123@localhost:3306/equiprofile
#
# Create database first:
#   CREATE DATABASE equiprofile CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
#   CREATE USER 'equiprofile'@'localhost' IDENTIFIED BY 'your_password';
#   GRANT ALL PRIVILEGES ON equiprofile.* TO 'equiprofile'@'localhost';
#   FLUSH PRIVILEGES;
#
DATABASE_URL=mysql://equiprofile:CHANGE_PASSWORD_HERE@localhost:3306/equiprofile

# ==========================================
# SECURITY (Required)
# ==========================================

# JWT Secret for token signing
# CRITICAL: Generate a new secure secret with: openssl rand -base64 32
# NEVER use the default value in production!
JWT_SECRET=GENERATE_NEW_SECRET_WITH_OPENSSL_RAND_BASE64_32

# Admin unlock password
# CRITICAL: Change this from the default!
# Use a strong password: openssl rand -base64 24
# This is used to access admin panel via showAdmin() console command
ADMIN_UNLOCK_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD

# ==========================================
# FEATURE FLAGS
# ==========================================

# Stripe Billing (disabled by default)
# Enable when you're ready to accept payments
# Requires: Stripe account and API keys configured below
ENABLE_STRIPE=false

# File Uploads (disabled by default)
# Enable when you're ready to allow document uploads
# Requires: Storage configuration (local or S3) below
ENABLE_UPLOADS=false

# ==========================================
# OPENAI CONFIGURATION (Optional - for AI features)
# ==========================================
# OpenAI API Key for AI-powered features
# Get from https://platform.openai.com/api-keys
OPENAI_API_KEY=

# OpenAI Model Selection (optional)
# Default: "gpt-4o-mini" (cost-effective, fast)
# Alternative: "gpt-4o" (higher quality, more expensive)
# OPENAI_MODEL=gpt-4o-mini

# ==========================================
# WEATHER API CONFIGURATION (Optional - for weather features)
# ==========================================
# Weather Provider API Key
# Options: OpenWeatherMap (openweathermap), WeatherAPI (weatherapi)
# WEATHER_API_KEY=
# WEATHER_API_PROVIDER=openweathermap

# ==========================================
# STRIPE CONFIGURATION (Optional)
# ==========================================
# Only needed if ENABLE_STRIPE=true
# Get these from: https://dashboard.stripe.com/apikeys
#
# Development keys (for testing):
# STRIPE_PUBLISHABLE_KEY=pk_test_...
# STRIPE_SECRET_KEY=sk_test_...
#
# Production keys:
STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Price IDs from Stripe Dashboard
# Create products/prices at: https://dashboard.stripe.com/products
STRIPE_MONTHLY_PRICE_ID=
STRIPE_YEARLY_PRICE_ID=

# ==========================================
# FILE UPLOAD/STORAGE (Optional)
# ==========================================
# Only needed if ENABLE_UPLOADS=true
#
# Option 1: Local file storage (recommended for starting)
# Create directory: mkdir -p /var/www/equiprofile.online/uploads
UPLOADS_DIR=/var/www/equiprofile.online/uploads
UPLOADS_MAX_SIZE=52428800

# Option 2: AWS S3 Storage (for scalability)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=eu-west-2
# AWS_S3_BUCKET=equiprofile-uploads

# ==========================================
# EMAIL/SMTP CONFIGURATION (Optional)
# ==========================================
# Configure to send emails (password reset, notifications, etc.)
#
# Example providers:
# - SendGrid: smtp.sendgrid.net, port 587
# - Mailgun: smtp.mailgun.org, port 587
# - Amazon SES: email-smtp.eu-west-1.amazonaws.com, port 587
#
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=support@equiprofile.online

# ==========================================
# OPENAI CONFIGURATION (Optional)
# ==========================================
# For AI-powered features (weather summaries, etc.)
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# OpenAI Model Selection (optional)
# Default: "gpt-4o-mini" (cost-effective, fast)
# Alternative: "gpt-4o" (higher quality, more expensive)
# OPENAI_MODEL=gpt-4o-mini

# ==========================================
# WEATHER API CONFIGURATION (Optional)
# ==========================================
# Weather Provider API Key
# Options: OpenWeatherMap (openweathermap), WeatherAPI (weatherapi)
# WEATHER_API_KEY=
# WEATHER_API_PROVIDER=openweathermap

# ==========================================
# OAUTH CONFIGURATION (Optional)
# ==========================================
# For OAuth authentication providers
# Only needed if you want OAuth login
OWNER_OPEN_ID=

# ==========================================
# MONITORING & LOGGING (Optional)
# ==========================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# Sentry error tracking (optional)
# Get DSN from: https://sentry.io
# SENTRY_DSN=

# ==========================================
# RATE LIMITING (Optional)
# ==========================================

# API rate limits (requests per minute per IP)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# ==========================================
# CORS CONFIGURATION (Optional)
# ==========================================

# Allowed origins for CORS (comma-separated)
# Example: https://equiprofile.online,https://www.equiprofile.online
CORS_ORIGINS=

# ==========================================
# SESSION CONFIGURATION (Optional)
# ==========================================

# Session duration in seconds (default: 30 days)
SESSION_MAX_AGE=2592000

# Cookie settings
COOKIE_SECURE=true
COOKIE_SAMESITE=lax

# ==========================================
# CACHE CONFIGURATION (Optional)
# ==========================================

# Redis cache (optional, for scalability)
# REDIS_URL=redis://localhost:6379

# ==========================================
# PRODUCTION OPTIMIZATIONS
# ==========================================

# Compression
COMPRESSION_ENABLED=true

# Trust proxy headers (needed behind Nginx)
TRUST_PROXY=true

# ==========================================
# BACKUP & MAINTENANCE
# ==========================================

# Backup directory for automated backups
BACKUP_DIR=/backups/equiprofile

# Maintenance mode (set to true to show maintenance page)
MAINTENANCE_MODE=false

# ==============================================================================
# DEPLOYMENT CHECKLIST
# ==============================================================================
#
# Before going live, ensure:
#
# ✓ DATABASE_URL is configured with secure password
# ✓ JWT_SECRET is generated (openssl rand -base64 32)
# ✓ ADMIN_UNLOCK_PASSWORD is changed from default
# ✓ BASE_URL matches your domain
# ✓ MySQL database is created
# ✓ Database migrations are run (pnpm run db:push)
# ✓ PM2 is configured and running
# ✓ Nginx is configured with SSL
# ✓ Firewall is enabled (ports 22, 80, 443)
# ✓ SSL certificate is installed
# ✓ Backups are configured
#
# ==============================================================================

# For detailed deployment instructions, see: WEBDOCK_DEPLOYMENT.md
